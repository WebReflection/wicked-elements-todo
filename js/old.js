!function(){"use strict";var t={};try{t.WeakSet=WeakSet}catch(e){!function(e){var n=new e,o=i.prototype;function i(t){n.set(this,new e),t&&t.forEach(this.add,this)}o.add=function(t){return n.get(this).set(t,1),this},o.delete=function(t){return n.get(this).delete(t)},o.has=function(t){return n.get(this).has(t)},t.WeakSet=i}(WeakMap)}var e=t.WeakSet;function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o={};o.CustomEvent="function"==typeof CustomEvent?CustomEvent:function(t){return e.prototype=new e("").constructor.prototype,e;function e(t,e){e||(e={});var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!!e.bubbles,!!e.cancelable,e.detail),n}}();var i=o.CustomEvent,r=Object.assign||function(t){for(var e,n=1;n<arguments.length;n++)for(var o in e=arguments[n]||{})e.hasOwnProperty(o)&&(t[o]=e[o]);return t},a=function(t){return"matches"in document.documentElement?function(t){return this.matches(t)}:function(e){var n=this;return(n.matchesSelector||n.webkitMatchesSelector||n.khtmlMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||function(e){var n=this.parentNode;return!!n&&-1<t.call(n.querySelectorAll(e),this)}).call(n,e)}}([].indexOf);var s={Event:i,WeakSet:e},c=document.contains||function(t){for(;t&&t!==this;)t=t.parentNode;return this===t},l=!0,d=[],u=[],h={},f={},v={define:function(t,e){l&&(l=!1,function(t){try{new MutationObserver(g).observe(t,{subtree:!0,childList:!0})}catch(e){t.addEventListener("DOMNodeInserted",function(t){g([{addedNodes:[t.target]}])},!1)}"complete"!==t.readyState&&t.addEventListener("DOMContentLoaded",y,{once:!0})}(document));var o=n(t);if("string"===o){if(b(t))throw new Error("duplicated: "+t);if(d.push(t),u.push(e||{}),y(),t in h){var i=b(t);i&&(h[t](i),delete h[t])}}else{if("object"!==o||1!==t.nodeType)throw new Error("undefinable: "+t);O(t,e||{})}},get:b,whenDefined:function(t){return Promise.resolve(b(t)||new Promise(function(e){h[t]=e}))}},p=function(t){var e="connected",n="dis"+e,o=t.Event,i=t.WeakSet,r=!0,a=new i;return function(t){return r&&(r=!r,function(t){var r=null;try{new MutationObserver(d).observe(t,{subtree:!0,childList:!0})}catch(e){var s=0,c=[],l=function(t){c.push(t),clearTimeout(s),s=setTimeout(function(){d(c.splice(s=0,c.length))},0)};t.addEventListener("DOMNodeRemoved",function(t){l({addedNodes:[],removedNodes:[t.target]})},!0),t.addEventListener("DOMNodeInserted",function(t){l({addedNodes:[t.target],removedNodes:[]})},!0)}function d(t){r=new f;for(var o,i=t.length,a=0;a<i;a++)u((o=t[a]).removedNodes,n,e),u(o.addedNodes,e,n);r=null}function u(t,e,n){for(var i,r=new o(e),a=t.length,s=0;s<a;1===(i=t[s++]).nodeType&&h(i,r,e,n));}function h(t,e,n,o){a.has(t)&&!r[n].has(t)&&(r[o].delete(t),r[n].add(t),t.dispatchEvent(e));for(var i=t.children||[],s=i.length,c=0;c<s;h(i[c++],e,n,o));}function f(){this[e]=new i,this[n]=new i}}(t.ownerDocument)),a.add(t),t}}(s),m={attributechanged:function(t){var e=t.Event;return function(t,e){var o={attributes:!0,attributeOldValue:!0},a=e instanceof Array&&e.length;a&&(o.attributeFilter=e.slice(0));try{new MutationObserver(i).observe(t,o)}catch(e){o.handleEvent=a?r:n,t.addEventListener("DOMAttrModified",o,!0)}return t};function n(t){o(t.target,t.attrName,t.prevValue)}function o(t,n,o){var i=new e("attributechanged");i.attributeName=n,i.oldValue=o,i.newValue=t.getAttribute(n),t.dispatchEvent(i)}function i(t){for(var e,n=0,i=t.length;n<i;n++)o((e=t[n]).target,e.attributeName,e.oldValue)}function r(t){-1<this.attributeFilter.indexOf(t.attrName)&&n(t)}}(s),connected:p,disconnected:p};function g(t){for(var e=0,n=t.length;e<n;e++)w(t[e].addedNodes,!1)}function b(t){var e=d.indexOf(t);return e<0?null:r({},u[e])}function y(){d.length&&w(document.querySelectorAll(d),!0)}function E(t){w(t.querySelectorAll(d),!0);for(var n,o,i=0,r=d.length;i<r;i++)o=d[i],!(n=f[o]||(f[o]=new e)).has(t)&&a.call(t,d[i])&&(n.add(t),O(t,u[i]))}function w(t,e){for(var n,o=0,i=t.length;o<i;o++)n=t[o],(e||1===n.nodeType)&&E(n)}function S(t,e,n,o){var r=e["on"+n];r&&(m[n](t,e.attributeFilter).addEventListener(n,r,!1),o&&c.call(document,t)&&t.dispatchEvent(new i(n)))}function O(t,e){S(t,e,"attributechanged",!1),S(t,e,"disconnected",!1),S(t,e,"connected",!0)}var k=Object.create,N=Object.defineProperty,L=Object.getOwnPropertyNames,C=Object.getPrototypeOf,M=Object.hasOwnProperty,x=Object.prototype,A=k(v,{define:{value:function(t,n){var o=new e,i={onconnected:c},r="function"==typeof n,a=r?n.prototype:n,s=function(t){var e=[];for(;t&&t!==x;){for(var n=L(t),o=0,i=n.length;o<i;){var r=n[o++];"on"===r.slice(0,2)&&"Options"!==r.slice(-7)&&e.push({type:r.slice(2),options:t[r+"Options"]||!1})}t=C(t)}return e}(a);function c(t){var e=t.currentTarget,i=t.type;e.removeEventListener(i,c,!1),o.has(e)||(o.add(e),function(t,e,n,o,i){var r=!1,a=0,s=e.length;for(;a<s;){var c=e[a++];o.addEventListener(c.type,t,c.options),r=r||c.type===i}t.init(n),r&&t.handleEvent(n)}(r?new n:k(a),s,t,e,i))}"ondisconnected"in a&&(i.ondisconnected=c),"onattributechanged"in a&&(i.onattributechanged=c,i.attributeFilter=(r?n.observedAttributes:a.observedAttributes)||a.attributeFilter||[]),j(a,"init",T),j(a,"handleEvent",P),v.define(t,i),M.call(n,"style")&&function(t){var e=document.createElement("style");e.type="text/css",e.styleSheet?e.styleSheet.cssText=t:e.textContent=t;(document.head||document.querySelector("head")).appendChild(e)}(n.style)}}});function j(t,e,n){e in t||N(t,e,{value:n})}function P(t){var e="on"+t.type;e in this&&this[e](t)}function T(t){this.el=t.currentTarget}var q=Object.create(null),D=function(t){return q[t]||function(t){return addEventListener("beforeunload",{name:t,handleEvent:W},!1),q[t]=JSON.parse(localStorage.getItem(t)||"{}")}(t)};function W(){var t=this.name;localStorage.setItem(t,JSON.stringify(q[t]))}var F=function(t){var e=D(t);return e.id||(e.id=0,e.items={}),e},V=function(t,e){delete t[e.dataset.id],e.remove()},I=[].forEach;A.define(".todoapp",{style:"\n    .todo-list.completed li:not(.completed),\n    .todo-list.active li.completed {\n      display: none;\n    }\n  ",init:function(t){this.el=t.currentTarget,this.list=this.el.querySelector(".todo-list");var e="todos#"+(this.el.id||"");this.el.dataset.storage=e,this.data=F(e),this.list.children.length||Object.keys(this.data.items).forEach(this.add,this);var n=location.hash.slice(2);n&&this.el.querySelector('a[href="#/'.concat(n,'"]')).click()},create:function(t){var e=++this.data.id;this.data.items[e]={text:t,checked:!1},this.add(e)},add:function(t){var e=document.createElement("li");e.dataset.id=t,this.list.appendChild(e)},removeCompleted:function(){I.call(this.list.querySelectorAll("li.completed"),V.bind(null,this.data.items))},toggleAll:function(t){var e=this.data.items;Object.keys(e).forEach(function(n){e[n].checked=t}),this.el.dispatchEvent(new CustomEvent("update"))},onchange:function(t){var e=t.target;switch(e.className){case"new-todo":this.create(e.value),e.value="";break;case"toggle-all":this.toggleAll(e.checked)}},onclick:function(t){var e=t.target;switch(e.className){case"clear-completed":this.removeCompleted();break;default:if("A"===e.nodeName&&!e.classList.contains("selected")){this.el.querySelector("a.selected").classList.remove("selected"),e.classList.add("selected"),this.list.classList.remove("active","completed");var n=e.hash.slice(2);n&&this.list.classList.add(n)}}}}),A.define(".todoapp .todo-list li",{get info(){return this.items[this.el.dataset.id]},get items(){return F(this.storage).items},get label(){return this.el.querySelector("label")},get toggle(){return this.el.querySelector(".toggle")},init:function(t){this.el=t.currentTarget,this.app=this.el.closest(".todoapp"),this.app.addEventListener("update",this),this.storage=this.app.dataset.storage,this.render(),this.update()},destroy:function(){this.app.removeEventListener("update",this)},render:function(){this.el.innerHTML='\n    <div class="view">\n      <input class="toggle" type="checkbox">\n      <label></label>\n      <button class="destroy"></button>\n    </div>'},update:function(){var t=this.info,e=t.text,n=t.checked;this.label.textContent=e,this.toggle.checked=n,this.el.classList.toggle("completed",n)},ondblclick:function(t){var e=t.target,n=this.label;e===n&&(t.preventDefault(),t.stopPropagation(),n.contentEditable=!0)},onfocusout:function(t){var e=this.label;t.target===e&&(t.stopPropagation(),e.contentEditable=!1,this.info.text=e.textContent)},onkeydown:function(t){if("Enter"===t.key){var e=this.label;t.target===e&&e.contentEditable&&(t.preventDefault(),e.blur())}},onchange:function(t){var e=t.target;switch(e.className){case"toggle":t.stopPropagation(),this.info.checked=e.checked,this.el.classList.toggle("completed",e.checked)}},onclick:function(t){switch(t.target.className){case"destroy":t.stopPropagation(),V(this.items,this.el),this.destroy()}},onupdate:function(){this[this.el.isConnected?"update":"destroy"]()}})}();
