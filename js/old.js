!function(){"use strict";var e={};try{e.WeakSet=WeakSet}catch(t){!function(t){var n=new t,o=r.prototype;function r(e){n.set(this,new t),e&&e.forEach(this.add,this)}o.add=function(e){return n.get(this).set(e,1),this},o.delete=function(e){return n.get(this).delete(e)},o.has=function(e){return n.get(this).has(e)},e.WeakSet=r}(WeakMap)}var t=e.WeakSet;function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o={};o.CustomEvent="function"==typeof CustomEvent?CustomEvent:function(e){return t.prototype=new t("").constructor.prototype,t;function t(e,t){t||(t={});var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail),n}}();var r=o.CustomEvent,i=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var o in t=arguments[n]||{})t.hasOwnProperty(o)&&(e[o]=t[o]);return e},c=function(e){return"matches"in document.documentElement?function(e){return this.matches(e)}:function(t){var n=this;return(n.matchesSelector||n.webkitMatchesSelector||n.khtmlMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||function(t){var n=this.parentNode;return!!n&&-1<e.call(n.querySelectorAll(t),this)}).call(n,t)}}([].indexOf);var a={Event:r,WeakSet:t},s=document.contains||function(e){for(;e&&e!==this;)e=e.parentNode;return this===e},l=!0,d=[],u=[],h={},f={},v={define:function(e,t){l&&(l=!1,function(e){try{new MutationObserver(y).observe(e,{subtree:!0,childList:!0})}catch(t){e.addEventListener("DOMNodeInserted",function(e){y([{addedNodes:[e.target]}])},!1)}"complete"!==e.readyState&&e.addEventListener("DOMContentLoaded",g,{once:!0})}(document));var o=n(e);if("string"===o){if(b(e))throw new Error("duplicated: "+e);if(d.push(e),u.push(t||{}),g(),e in h){var r=b(e);r&&(h[e](r),delete h[e])}}else{if("object"!==o||1!==e.nodeType)throw new Error("undefinable: "+e);N(e,t||{})}},get:b,whenDefined:function(e){return Promise.resolve(b(e)||new Promise(function(t){h[e]=t}))}},p=function(e){var t="connected",n="dis"+t,o=e.Event,r=e.WeakSet,i=!0,c=new r;return function(e){return i&&(i=!i,function(e){var i=null;try{new MutationObserver(d).observe(e,{subtree:!0,childList:!0})}catch(t){var a=0,s=[],l=function(e){s.push(e),clearTimeout(a),a=setTimeout(function(){d(s.splice(a=0,s.length))},0)};e.addEventListener("DOMNodeRemoved",function(e){l({addedNodes:[],removedNodes:[e.target]})},!0),e.addEventListener("DOMNodeInserted",function(e){l({addedNodes:[e.target],removedNodes:[]})},!0)}function d(e){i=new f;for(var o,r=e.length,c=0;c<r;c++)u((o=e[c]).removedNodes,n,t),u(o.addedNodes,t,n);i=null}function u(e,t,n){for(var r,i=new o(t),c=e.length,a=0;a<c;1===(r=e[a++]).nodeType&&h(r,i,t,n));}function h(e,t,n,o){c.has(e)&&!i[n].has(e)&&(i[o].delete(e),i[n].add(e),e.dispatchEvent(t));for(var r=e.children||[],a=r.length,s=0;s<a;h(r[s++],t,n,o));}function f(){this[t]=new r,this[n]=new r}}(e.ownerDocument)),c.add(e),e}}(a),m={attributechanged:function(e){var t=e.Event;return function(e,t){var o={attributes:!0,attributeOldValue:!0},c=t instanceof Array&&t.length;c&&(o.attributeFilter=t.slice(0));try{new MutationObserver(r).observe(e,o)}catch(t){o.handleEvent=c?i:n,e.addEventListener("DOMAttrModified",o,!0)}return e};function n(e){o(e.target,e.attrName,e.prevValue)}function o(e,n,o){var r=new t("attributechanged");r.attributeName=n,r.oldValue=o,r.newValue=e.getAttribute(n),e.dispatchEvent(r)}function r(e){for(var t,n=0,r=e.length;n<r;n++)o((t=e[n]).target,t.attributeName,t.oldValue)}function i(e){-1<this.attributeFilter.indexOf(e.attrName)&&n(e)}}(a),connected:p,disconnected:p};function y(e){for(var t=0,n=e.length;t<n;t++)w(e[t].addedNodes,!1)}function b(e){var t=d.indexOf(e);return t<0?null:i({},u[t])}function g(){d.length&&w(document.querySelectorAll(d),!0)}function S(e){w(e.querySelectorAll(d),!0);for(var n,o,r=0,i=d.length;r<i;r++)o=d[r],!(n=f[o]||(f[o]=new t)).has(e)&&c.call(e,d[r])&&(n.add(e),N(e,u[r]))}function w(e,t){for(var n,o=0,r=e.length;o<r;o++)n=e[o],(t||1===n.nodeType)&&S(n)}function E(e,t,n,o){var i=t["on"+n];i&&(m[n](e,t.attributeFilter).addEventListener(n,i,!1),o&&s.call(document,e)&&e.dispatchEvent(new r(n)))}function N(e,t){E(e,t,"attributechanged",!1),E(e,t,"disconnected",!1),E(e,t,"connected",!0)}var O=Object.create,k=Object.defineProperty,L=Object.getOwnPropertyNames,C=Object.getPrototypeOf,M=Object.hasOwnProperty,A=Object.prototype;function q(e,t,n){t in e||k(e,t,{value:n})}function x(e){var t="on"+e.type;t in this&&this[t](e)}function T(e){this.el=e.currentTarget}O(v,{define:{value:function(e,n){var o=new t,r={onconnected:s},i="function"==typeof n,c=i?n.prototype:n,a=function(e){var t=[];for(;e&&e!==A;){for(var n=L(e),o=0,r=n.length;o<r;){var i=n[o++];"on"===i.slice(0,2)&&"Options"!==i.slice(-7)&&t.push({type:i.slice(2),options:e[i+"Options"]||!1})}e=C(e)}return t}(c);function s(e){var t=e.currentTarget,r=e.type;t.removeEventListener(r,s,!1),o.has(t)||(o.add(t),function(e,t,n,o,r){var i=!1,c=0,a=t.length;for(;c<a;){var s=t[c++];o.addEventListener(s.type,e,s.options),i=i||s.type===r}e.init(n),i&&e.handleEvent(n)}(i?new n:O(c),a,e,t,r))}"ondisconnected"in c&&(r.ondisconnected=s),"onattributechanged"in c&&(r.onattributechanged=s,r.attributeFilter=(i?n.observedAttributes:c.observedAttributes)||c.attributeFilter||[]),q(c,"init",T),q(c,"handleEvent",x),v.define(e,r),M.call(n,"style")&&function(e){var t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.textContent=e;(document.head||document.querySelector("head")).appendChild(t)}(n.style)}}}).define(".todoapp",{style:"\n    .todo-list.completed li:not(.completed),\n    .todo-list.active li.completed {\n      display: none;\n    }\n  ",init:function(e){this.el=e.currentTarget,this.list=this.el.querySelector(".todo-list"),this.initStorage();var t=location.hash.slice(2);t&&this.el.querySelector('a[href="#/'.concat(t,'"]')).click()},initStorage:function(){var e=this,t=this.el.id||"",n=localStorage.getItem("todos#"+t);n&&JSON.parse(n).forEach(function(t){return e.add(t.textContent,t.className)}),addEventListener("beforeunload",function(){for(var n,o=[],r=e.list.querySelectorAll("label"),i=0;i<r.length;i++)n=r[i],o[i]={textContent:n.textContent,className:n.closest("li").className};localStorage.setItem("todos#"+t,JSON.stringify(o))})},add:function(e,t){var n=document.createElement("li"),o="completed"===t?"checked":"";n.className=t||"",n.innerHTML='\n    <div class="view">\n      <input class="toggle" type="checkbox" '.concat(o,'>\n      <label></label>\n      <button class="destroy"></button>\n    </div>'),n.querySelector("label").textContent=e,this.list.appendChild(n)},clearCompleted:function(){for(var e=this.list.querySelectorAll("li.completed"),t=0;t<e.length;t++)e[t].remove()},toggleAll:function(e){for(var t=this.list.querySelectorAll("input"),n=0;n<t.length;n++)this.update(t[n],e)},update:function(e,t){e.checked=t,e.closest("li").classList.toggle("completed",t)},onchange:function(e){var t=e.target;switch(t.className){case"new-todo":this.add(t.value),t.value="";break;case"toggle":this.update(t,t.checked);break;case"toggle-all":this.toggleAll(t.checked)}},onclick:function(e){var t=e.target;switch(t.className){case"clear-completed":this.clearCompleted();break;case"destroy":t.closest("li").remove();break;default:if("A"===t.nodeName&&!t.classList.contains("selected")){this.el.querySelector("a.selected").classList.remove("selected"),t.classList.add("selected"),this.list.classList.remove("active","completed");var n=t.hash.slice(2);n&&this.list.classList.add(n)}}}})}();
