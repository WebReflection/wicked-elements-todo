!function(){"use strict";var e=Object.assign;function t(e){return this.matches(e)}var n={Event:CustomEvent,WeakSet:WeakSet},o=document.contains||function(e){for(;e&&e!==this;)e=e.parentNode;return this===e},i=!0,r=[],a=[],s={},c={},l={define:function(e,t){i&&(i=!1,function(e){try{new MutationObserver(h).observe(e,{subtree:!0,childList:!0})}catch(t){e.addEventListener("DOMNodeInserted",function(e){h([{addedNodes:[e.target]}])},!1)}"complete"!==e.readyState&&e.addEventListener("DOMContentLoaded",v,{once:!0})}(document));var n=typeof e;if("string"===n){if(f(e))throw new Error("duplicated: "+e);if(r.push(e),a.push(t||{}),v(),e in s){var o=f(e);o&&(s[e](o),delete s[e])}}else{if("object"!==n||1!==e.nodeType)throw new Error("undefinable: "+e);b(e,t||{})}},get:f,whenDefined:function(e){return Promise.resolve(f(e)||new Promise(function(t){s[e]=t}))}},d=function(e){var t="connected",n="dis"+t,o=e.Event,i=e.WeakSet,r=!0,a=new i;return function(e){return r&&(r=!r,function(e){var r=null;try{new MutationObserver(d).observe(e,{subtree:!0,childList:!0})}catch(t){var s=0,c=[],l=function(e){c.push(e),clearTimeout(s),s=setTimeout(function(){d(c.splice(s=0,c.length))},0)};e.addEventListener("DOMNodeRemoved",function(e){l({addedNodes:[],removedNodes:[e.target]})},!0),e.addEventListener("DOMNodeInserted",function(e){l({addedNodes:[e.target],removedNodes:[]})},!0)}function d(e){r=new f;for(var o,i=e.length,a=0;a<i;a++)u((o=e[a]).removedNodes,n,t),u(o.addedNodes,t,n);r=null}function u(e,t,n){for(var i,r=new o(t),a=e.length,s=0;s<a;1===(i=e[s++]).nodeType&&h(i,r,t,n));}function h(e,t,n,o){a.has(e)&&!r[n].has(e)&&(r[o].delete(e),r[n].add(e),e.dispatchEvent(t));for(var i=e.children||[],s=i.length,c=0;c<s;h(i[c++],t,n,o));}function f(){this[t]=new i,this[n]=new i}}(e.ownerDocument)),a.add(e),e}}(n),u={attributechanged:function(e){var t=e.Event;return function(e,t){var o={attributes:!0,attributeOldValue:!0},a=t instanceof Array&&t.length;a&&(o.attributeFilter=t.slice(0));try{new MutationObserver(i).observe(e,o)}catch(t){o.handleEvent=a?r:n,e.addEventListener("DOMAttrModified",o,!0)}return e};function n(e){o(e.target,e.attrName,e.prevValue)}function o(e,n,o){var i=new t("attributechanged");i.attributeName=n,i.oldValue=o,i.newValue=e.getAttribute(n),e.dispatchEvent(i)}function i(e){for(var t,n=0,i=e.length;n<i;n++)o((t=e[n]).target,t.attributeName,t.oldValue)}function r(e){-1<this.attributeFilter.indexOf(e.attrName)&&n(e)}}(n),connected:d,disconnected:d};function h(e){for(var t=0,n=e.length;t<n;t++)g(e[t].addedNodes,!1)}function f(t){var n=r.indexOf(t);return n<0?null:e({},a[n])}function v(){r.length&&g(document.querySelectorAll(r),!0)}function p(e){g(e.querySelectorAll(r),!0);for(var n,o,i=0,s=r.length;i<s;i++)o=r[i],!(n=c[o]||(c[o]=new WeakSet)).has(e)&&t.call(e,r[i])&&(n.add(e),b(e,a[i]))}function g(e,t){for(var n,o=0,i=e.length;o<i;o++)n=e[o],(t||1===n.nodeType)&&p(n)}function m(e,t,n,i){var r=t["on"+n];r&&(u[n](e,t.attributeFilter).addEventListener(n,r,!1),i&&o.call(document,e)&&e.dispatchEvent(new CustomEvent(n)))}function b(e,t){m(e,t,"attributechanged",!1),m(e,t,"disconnected",!1),m(e,t,"connected",!0)}var y=Object.create,w=Object.defineProperty,N=Object.getOwnPropertyNames,E=Object.getPrototypeOf,O=Object.hasOwnProperty,S=Object.prototype;function L(e,t,n){t in e||w(e,t,{value:n})}function k(e){var t="on"+e.type;t in this&&this[t](e)}function A(e){this.el=e.currentTarget}y(l,{define:{value:function(e,t){var n=new WeakSet,o={onconnected:s},i="function"==typeof t,r=i?t.prototype:t,a=function(e){var t=[];for(;e&&e!==S;){for(var n=N(e),o=0,i=n.length;o<i;){var r=n[o++];"on"===r.slice(0,2)&&"Options"!==r.slice(-7)&&t.push({type:r.slice(2),options:e[r+"Options"]||!1})}e=E(e)}return t}(r);function s(e){var o=e.currentTarget,c=e.type;o.removeEventListener(c,s,!1),n.has(o)||(n.add(o),function(e,t,n,o,i){var r=!1,a=0,s=t.length;for(;a<s;){var c=t[a++];o.addEventListener(c.type,e,c.options),r=r||c.type===i}e.init(n),r&&e.handleEvent(n)}(i?new t:y(r),a,e,o,c))}"ondisconnected"in r&&(o.ondisconnected=s),"onattributechanged"in r&&(o.onattributechanged=s,o.attributeFilter=(i?t.observedAttributes:r.observedAttributes)||r.attributeFilter||[]),L(r,"init",A),L(r,"handleEvent",k),l.define(e,o),O.call(t,"style")&&function(e){var t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.textContent=e;(document.head||document.querySelector("head")).appendChild(t)}(t.style)}}}).define(".todoapp",{style:"\n    .todo-list.completed li:not(.completed),\n    .todo-list.active li.completed {\n      display: none;\n    }\n  ",init(e){this.el=e.currentTarget,this.list=this.el.querySelector(".todo-list"),this.initStorage();const t=location.hash.slice(2);t&&this.el.querySelector(`a[href="#/${t}"]`).click()},initStorage(){const e=this.el.id||"",t=localStorage.getItem("todos#"+e);t&&JSON.parse(t).forEach(e=>this.add(e.textContent,e.className)),addEventListener("beforeunload",()=>{const t=[];for(let e,n=this.list.querySelectorAll("label"),o=0;o<n.length;o++)e=n[o],t[o]={textContent:e.textContent,className:e.closest("li").className};localStorage.setItem("todos#"+e,JSON.stringify(t))})},add(e,t){const n=document.createElement("li"),o="completed"===t?"checked":"";n.className=t||"",n.innerHTML=`\n    <div class="view">\n      <input class="toggle" type="checkbox" ${o}>\n      <label></label>\n      <button class="destroy"></button>\n    </div>`,n.querySelector("label").textContent=e,this.list.appendChild(n)},clearCompleted(){for(let e=this.list.querySelectorAll("li.completed"),t=0;t<e.length;t++)e[t].remove()},toggleAll(e){for(let t=this.list.querySelectorAll("input"),n=0;n<t.length;n++)this.update(t[n],e)},update(e,t){e.checked=t,e.closest("li").classList.toggle("completed",t)},onchange(e){const{target:t}=e;switch(t.className){case"new-todo":this.add(t.value),t.value="";break;case"toggle":this.update(t,t.checked);break;case"toggle-all":this.toggleAll(t.checked)}},onclick(e){const{target:t}=e;switch(t.className){case"clear-completed":this.clearCompleted();break;case"destroy":t.closest("li").remove();break;default:if("A"===t.nodeName&&!t.classList.contains("selected")){this.el.querySelector("a.selected").classList.remove("selected"),t.classList.add("selected"),this.list.classList.remove("active","completed");const e=t.hash.slice(2);e&&this.list.classList.add(e)}}}})}();
